\documentclass[a4paper]{proc}

\usepackage{graphicx}
\title{Rex Ready: A TAC Classic agent implementation}
\author{\textbf{James Robinson}, Andrew Sullivan, Peter Prince}

\begin{document}

\maketitle

\begin{abstract}
  In this paper I describe our TAC Classic agent, \emph{Rex Ready}, which achieved a second place finish in the 2014 COMP6203 class tournament. \emph{Rex Ready} relies on \emph{Bayesian updating} and \emph{fuzzy logic} to build a model of predicted market prices, and a \emph{hill-climbing optimiser} to select the optimum bidding strategy taking into account client preferences, predicted market prices, and availability data.
\end{abstract}

\section{Introduction}

Rex Ready is a TAC Classic agent implemented in Java. Due to space constraints, the TAC Classic ruleset will not be described in detail in this paper.

Rex Ready consists of three main components:

\begin{itemize}
  \item A price prediction module, which attempts to predict:
  \begin{itemize}
    \item The minimum price that each flight ticket will reach between the current time and the end of the game, and
    \item The closing price of each hotel auction, under the assumption that they will all close at the end of the current minute,
  \end{itemize}
  \item An optimiser, which attempts to find a strategy that maximises the agent's score, and
  \item A bidding component, which invokes the optimiser to select a strategy, and uses that strategy to place bids.
\end{itemize}

\section{Price prediction}

\subsection{Flight price prediction}

\subsection{Hotel price prediction}

\subsection{Entertainment price prediction}

\section{Optimisation}

\subsection{Mutation rate}

\begin{figure}
  \includegraphics[width=\linewidth]{mutation_rate_1.pdf}
  \caption{Time vs score for mutation rates in interval [0.1, 0.5]}
  \label{fig:mutation_rate_1}
\end{figure}

\begin{figure}
  \includegraphics[width=\linewidth]{mutation_rate_2.pdf}
  \caption{Time vs score for mutation rates in interval [0.05, 0.2]}
  \label{fig:mutation_rate_2}
\end{figure}

\begin{figure}
  \includegraphics[width=\linewidth]{mutation_rate_3.pdf}
  \caption{Time vs score for mutation rates in interval [0.01, 0.05]}
  \label{fig:mutation_rate_3}
\end{figure}

Chosing a suitable mutation rate was critical to the performance of the agent, since the optimiser is only provided with a limited amount of time in which to find an optimal solution. In order to select a good mutation rate, the current predicted prices, availability, and owned goods were captured during a game in order to set up a realistic scenario in which to test the optimiser in isolation, and the optimiser was allowed to run for 10 seconds with various different mutation rates. Each mutation rate was tested 100 times in an attempt to smooth out random variations in performance.

Figure~\ref{fig:mutation_rate_1} shows mutation rates in the interval [0.1, 0.5] in steps of 0.1. A mutation rate of 0.1 proved most effective in this test, reaching its highest score significantly faster than any other rate.

Mutation rates in the interval [0.05, 0.2] in steps of 0.05 were then tested, and the results are shown in figure~\ref{fig:mutation_rate_2}. The optimal mutation rate in this second test was 0.05.

A third and final test was performed with mutation rates in the interval [0.01, 0.1] in steps of 0.01 (illustrated in figure~\ref{fig:mutation_rate_3}), but the results were too noisy to draw any statistically significant conclusions.

Based on these experiments, a mutation rate of 0.05 was selected for the optimiser.

\section{Bidding strategy}

At the very start of each game, the agent immediately attempts to gain inventory by placing bids for 8 of each hotel room at a price of 10 each, and 1 of each type of entertainment at a price of 50 each. The agent does not perform any informed bidding for the first 30 seconds of the game, in order to allow the prices to settle and the price predictors to begin producing sensible estimates.

Depending on the competitiveness of the hotel bidding environment, the optimiser might not settle on a strategy until very late in the game. For this reason, the agent is forbidden from placing any bids on flights or entertainment until the 4th minute, after the first 3 hotel auctions close. This prevents the agent from purchasing expensive flight tickets that it will not need, and also prevents it from selling entertainment tickets that it may need in the future.

Bidding is performed on ``bid ticks'', which occur each time the last flight action's quote is updated (every 10 seconds). During a bid tick the agent updates its price estimates and runs the optimiser for a fixed duration (7 seconds) in order to pick the bidding strategy for that tick. Once a new strategy has been determined, the agent clears and replaces its allocations and places bids.

\subsection{Flight bidding}

In order to minimise costs, the agent attempts to purchase flights at their predicted minimum price rather than at a specific time. During each bid tick after the 4th minute, the agent will purchase required flight tickets if:

\begin{itemize}
  \item The ticket's current ask price is within 10 of its projected minimum, or
  \item There are less than 30 seconds of the game remaining.
\end{itemize}

\subsection{Entertainment bidding}

During each bid tick after the 4th minute, the agent will:

\begin{itemize}
  \item Place buy bids for required entertainment tickets at the current ask price, or 200, whichever is lower
  \item Place sell bids for all owned but not required entertainment tickets at the current ask price - 10, or 60, whichever is higher
\end{itemize}

Entertainment tickets are never sold for less than 60 because the utility bonus that the purchaser would gain from the ticket is likely to be greater than the amount of profit our agent would make from the transaction, meaning that the transaction is likely to hurt our agent's position in the tournament rankings.

In addition, the agent will attempt to sell entertainment tickets that it does not need \emph{or even own} for at least 200, since this amount is equal to the oversell penalty. In practice, very few agents purchase tickets for above 200 since such tickets provide no utility bonus, but this rule allows us to take advantage of poorly-designed or malfunctioning agents to improve our ranking.

\subsection{Hotel bidding}

During the final bid tick of each minute, the agent places hotel bids in the following manner for each hotel auction:

\begin{itemize}
  \item Let $HQW$ (\emph{hypothetical quantity won}) be the number of rooms the agent would have bought if the auction had closed at the end of the previous minute
  \item Let $alloc$ be the number of rooms that we need
  \item Place a bid for $alloc$ rooms at the predicted price + 50
  \item If $alloc < HQW$, place a bid for $HQW - alloc$ hotel rooms at the current ask price + 1
\end{itemize}

By placing the lowest allowed bid for goods that the agent no longer needs, we maximise the possibility that another agent will purchase those goods, meaning we do not have to pay for them.

\section{Performance}

\end{document}
